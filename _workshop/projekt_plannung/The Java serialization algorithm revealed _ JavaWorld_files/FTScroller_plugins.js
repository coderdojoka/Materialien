(function(){var method;var noop=function(){};var methods=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"];var length=methods.length;var console=(window.console=window.console||{});while(length--){method=methods[length];if(!console[method]){console[method]=noop}}}());var FTScroller,CubicBezier;(function(){var _ftscrollerMoving=false;var _trackPointerEvents=window.navigator.msPointerEnabled;var _trackTouchEvents=!_trackPointerEvents&&(window.propertyIsEnumerable("ontouchstart")||window.document.hasOwnProperty("ontouchstart"));var _useToggleableHardwareAcceleration=!window.hasOwnProperty("ArrayBuffer");var _canClearSelection=(window.Selection&&window.Selection.prototype.removeAllRanges);var _vendorCSSPrefix,_vendorStylePropertyPrefix,_vendorTransformLookup;if(document.createElement("div").style.transform!==undefined){_vendorCSSPrefix="";_vendorStylePropertyPrefix="";_vendorTransformLookup="transform"}else{if(window.opera&&Object.prototype.toString.call(window.opera)==="[object Opera]"){_vendorCSSPrefix="-o-";_vendorStylePropertyPrefix="O";_vendorTransformLookup="OTransform"}else{if(document.documentElement.style.MozTransform!==undefined){_vendorCSSPrefix="-moz-";_vendorStylePropertyPrefix="Moz";_vendorTransformLookup="MozTransform"}else{if(document.documentElement.style.webkitTransform!==undefined){_vendorCSSPrefix="-webkit-";_vendorStylePropertyPrefix="webkit";_vendorTransformLookup="-webkit-transform"}else{if(typeof navigator.cpuClass==="string"){_vendorCSSPrefix="-ms-";_vendorStylePropertyPrefix="ms";_vendorTransformLookup="-ms-transform"}}}}}if(!_useToggleableHardwareAcceleration&&document.createElement("div").style[_vendorStylePropertyPrefix+(_vendorStylePropertyPrefix?"P":"p")+"erspective"]===undefined){_useToggleableHardwareAcceleration=true}var _transformProperty=_vendorStylePropertyPrefix+(_vendorStylePropertyPrefix?"T":"t")+"ransform";var _transitionProperty=_vendorStylePropertyPrefix+(_vendorStylePropertyPrefix?"T":"t")+"ransition";var _translateRulePrefix=_useToggleableHardwareAcceleration?"translate(":"translate3d(";var _transformPrefixes={x:"",y:"0,"};var _transformSuffixes={x:",0"+(_useToggleableHardwareAcceleration?")":",0)"),y:(_useToggleableHardwareAcceleration?")":",0)")};var _kFriction=0.998;var _kMinimumSpeed=0.01;(function(){var stylesheetContainerNode=document.getElementsByTagName("head")[0]||document.documentElement;var newStyleNode=document.createElement("style");var hardwareAccelerationRule;var _styleText;newStyleNode.type="text/css";if(_useToggleableHardwareAcceleration){hardwareAccelerationRule=_vendorCSSPrefix+"transform-style: preserve-3d;"}else{hardwareAccelerationRule=_vendorCSSPrefix+"transform: translateZ(0);"}_styleText=[".ftscroller_scrolling { "+_vendorCSSPrefix+"user-select: none; cursor: all-scroll !important }",".ftscroller_container { overflow: hidden; position: relative; max-height: 100%; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); -ms-touch-action: none }",".ftscroller_hwaccelerated { "+hardwareAccelerationRule+" }",".ftscroller_x, .ftscroller_y { position: relative; min-width: 100%; min-height: 100%; overflow: hidden }",".ftscroller_x { display: inline-block }",".ftscroller_scrollbar { pointer-events: none; position: absolute; width: 5px; height: 5px; border: 1px solid rgba(255, 255, 255, 0.15); -webkit-border-radius: 3px; border-radius: 6px; opacity: 0; "+_vendorCSSPrefix+"transition: opacity 350ms; z-index: 10 }",".ftscroller_scrollbarx { bottom: 2px; left: 2px }",".ftscroller_scrollbary { right: 2px; top: 2px }",".ftscroller_scrollbarinner { height: 100%; background: rgba(0,0,0,0.5); -webkit-border-radius: 2px; border-radius: 4px / 6px }",".ftscroller_scrolling .ftscroller_scrollbar { opacity: 1; "+_vendorCSSPrefix+"transition: none; -o-transition: all 0 none }",".ftscroller_scrolling .ftscroller_container .ftscroller_scrollbar { opacity: 0 }"];if(newStyleNode.styleSheet){newStyleNode.styleSheet.cssText=_styleText.join("\n")}else{newStyleNode.appendChild(document.createTextNode(_styleText.join("\n")))}stylesheetContainerNode.insertBefore(newStyleNode,stylesheetContainerNode.firstChild)}());FTScroller=function(domNode,options){var key;var destroy,setSnapSize,scrollTo,scrollBy,updateDimensions,addEventListener,removeEventListener,_startScroll,_updateScroll,_endScroll,_finalizeScroll,_interruptScroll,_flingScroll,_snapScroll,_getSnapPositionForPosition,_initializeDOM,_existingDOMValid,_domChanged,_updateDimensions,_updateScrollbarDimensions,_updateElementPosition,_updateSegments,_setAxisPosition,_scheduleAxisPosition,_fireEvent,_childFocused,_modifyDistanceBeyondBounds,_distancesBeyondBounds,_startAnimation,_scheduleRender,_cancelAnimation,_toggleEventHandlers,_onTouchStart,_onTouchMove,_onTouchEnd,_onMouseDown,_onMouseMove,_onMouseUp,_onPointerDown,_onPointerMove,_onPointerUp,_onPointerCancel,_onPointerCaptureEnd,_onClick,_onMouseScroll,_captureInput,_releaseInputCapture,_getBoundingRect;var _instanceOptions={scrollbars:true,scrollingX:true,scrollingY:true,scrollBoundary:1,scrollResponseBoundary:1,alwaysScroll:false,contentWidth:undefined,contentHeight:undefined,snapping:false,snapSizeX:undefined,snapSizeY:undefined,paginatedSnap:false,bouncing:true,updateOnChanges:true,updateOnWindowResize:false,baseAlignments:{x:-1,y:-1},windowScrollingActiveFlag:undefined,hwAccelerationClass:"ftscroller_hwaccelerated",enableRequestAnimationFrameSupport:true,maxFlingDuration:1000};var _publicSelf;var _self=this;var _scrollableMasterNode=domNode;var _containerNode;var _contentParentNode;var _scrollNodes={x:null,y:null};var _scrollbarNodes={x:null,y:null};var _metrics={container:{x:null,y:null},content:{x:null,y:null,rawX:null,rawY:null},scrollEnd:{x:null,y:null}};var _snapGridSize={x:false,y:false,userX:false,userY:false};var _baseSegment={x:0,y:0};var _activeSegment={x:0,y:0};var _inputIdentifier=false;var _inputIndex=0;var _inputCaptured=false;var _isScrolling=false;var _isDisplayingScroll=false;var _isAnimating=false;var _scrollbarsVisible=false;var _baseScrollPosition={x:0,y:0};var _lastScrollPosition={x:0,y:0};var _scrollAtExtremity={x:null,y:null};var _preventClick=false;var _timeouts=[];var _hasBeenScrolled=false;var _baseScrollableAxes={};var _scrollableAxes={x:true,y:true};var _gestureStart={x:0,y:0,t:0};var _cumulativeScroll={x:0,y:0};var _eventHistory=[];var _kFlingBezier=new CubicBezier(0.1,0.4,0.3,1);var _kBounceBezier=new CubicBezier(0.7,0,0.9,0.6);var _kFlingTruncatedBezier=_kFlingBezier.divideAtT(0.97)[0];var _kDecelerateBezier=new CubicBezier(0,0.5,0.5,1);var _domChangeDebouncer=false;var _scrollWheelEndDebouncer=false;var _animationFrameRequest=false;var _animationTargetPosition={x:0,y:0};var _reqAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||false;var _cancelAnimationFrame=window.cancelAnimationFrame||window.cancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||false;var _eventListeners={scrollstart:[],scroll:[],scrollend:[],segmentwillchange:[],segmentdidchange:[],reachedstart:[],reachedend:[],scrollinteractionend:[]};var _mutationObserver;if(typeof FTScrollerOptions==="object"&&FTScrollerOptions){for(key in FTScrollerOptions){if(FTScrollerOptions.hasOwnProperty(key)&&_instanceOptions.hasOwnProperty(key)){_instanceOptions[key]=FTScrollerOptions[key]}}}if(options){for(key in options){if(options.hasOwnProperty(key)&&_instanceOptions.hasOwnProperty(key)){_instanceOptions[key]=options[key]}}if(options.hasOwnProperty("snapSizeX")&&!isNaN(options.snapSizeX)){_snapGridSize.userX=_snapGridSize.x=options.snapSizeX}if(options.hasOwnProperty("snapSizeY")&&!isNaN(options.snapSizeY)){_snapGridSize.userY=_snapGridSize.y=options.snapSizeY}if(options.contentWidth&&options.contentHeight){options.updateOnChanges=false}}_instanceOptions.scrollResponseBoundary=Math.min(_instanceOptions.scrollBoundary,_instanceOptions.scrollResponseBoundary);if(_instanceOptions.scrollingX){_baseScrollableAxes.x=true}if(_instanceOptions.scrollingY){_baseScrollableAxes.y=true}destroy=function destroy(removeElements){var i,l;_toggleEventHandlers(false);_cancelAnimation();if(_domChangeDebouncer){window.clearTimeout(_domChangeDebouncer);_domChangeDebouncer=false}for(i=0,l=_timeouts.length;i<l;i=i+1){window.clearTimeout(_timeouts[i])}_timeouts.length=0;if(removeElements&&_scrollableMasterNode){while(_contentParentNode.firstChild){_scrollableMasterNode.appendChild(_contentParentNode.firstChild)}_scrollableMasterNode.removeChild(_containerNode)}_scrollableMasterNode=null;_containerNode=null;_contentParentNode=null;_scrollNodes.x=null;_scrollNodes.y=null;_scrollbarNodes.x=null;_scrollbarNodes.y=null;for(i in _eventListeners){if(_eventListeners.hasOwnProperty(i)){_eventListeners[i].length=0}}if(_ftscrollerMoving&&_ftscrollerMoving===_self){_ftscrollerMoving=false;if(_instanceOptions.windowScrollingActiveFlag){window[_instanceOptions.windowScrollingActiveFlag]=false}}};setSnapSize=function setSnapSize(width,height){_snapGridSize.userX=width;_snapGridSize.userY=height;_snapGridSize.x=width;_snapGridSize.y=height;_metrics.content.x=Math.ceil(_metrics.content.rawX/width)*width;_metrics.content.y=Math.ceil(_metrics.content.rawY/height)*height;_metrics.scrollEnd.x=_metrics.container.x-_metrics.content.x;_metrics.scrollEnd.y=_metrics.container.y-_metrics.content.y;_updateScrollbarDimensions();_snapScroll();_updateSegments(true)};scrollTo=function scrollTo(left,top,animationDuration){var targetPosition,duration,positions,axis,maxDuration=0,scrollPositionsToApply={};_endScroll(Date.now());positions={x:-left,y:-top};for(axis in _baseScrollableAxes){if(_baseScrollableAxes.hasOwnProperty(axis)){targetPosition=positions[axis];if(targetPosition===false){continue}targetPosition=Math.min(0,Math.max(_metrics.scrollEnd[axis],targetPosition));if(_instanceOptions.snapping&&_snapGridSize[axis]){targetPosition=Math.round(targetPosition/_snapGridSize[axis])*_snapGridSize[axis]}duration=animationDuration||0;if(duration===true){duration=Math.sqrt(Math.abs(_baseScrollPosition[axis]-targetPosition))*20}_setAxisPosition(axis,targetPosition,duration);scrollPositionsToApply[axis]=targetPosition;maxDuration=Math.max(maxDuration,duration)}}if(_baseScrollPosition.x!==positions.x||_baseScrollPosition.y!==positions.y){_hasBeenScrolled=true;_fireEvent("scrollstart",{scrollLeft:-_baseScrollPosition.x,scrollTop:-_baseScrollPosition.y})}if(maxDuration){_timeouts.push(setTimeout(function(){var axis;for(axis in scrollPositionsToApply){if(scrollPositionsToApply.hasOwnProperty(axis)){_lastScrollPosition[axis]=scrollPositionsToApply[axis]}}_finalizeScroll()},maxDuration))}else{_finalizeScroll()}_fireEvent("scroll",{scrollLeft:-_baseScrollPosition.x,scrollTop:-_baseScrollPosition.y})};scrollBy=function scrollBy(horizontal,vertical,animationDuration){scrollTo(parseFloat(horizontal)-_baseScrollPosition.x,parseFloat(vertical)-_baseScrollPosition.y,animationDuration)};updateDimensions=function updateDimensions(contentWidth,contentHeight,ignoreSnapScroll){options.contentWidth=contentWidth||options.contentWidth;options.contentHeight=contentHeight||options.contentHeight;_updateDimensions(!!ignoreSnapScroll)};addEventListener=function addEventListener(eventname,eventlistener){if(!_eventListeners.hasOwnProperty(eventname)){return false}_eventListeners[eventname].push(eventlistener);return true};removeEventListener=function removeEventListener(eventname,eventlistener){var i;if(!_eventListeners.hasOwnProperty(eventname)){return false}for(i=_eventListeners[eventname].length;i>=0;i=i-1){if(_eventListeners[eventname][i]===eventlistener){_eventListeners[eventname].splice(i,1)}}return true};_startScroll=function _startScroll(inputX,inputY,inputTime,rawEvent){var triggerScrollInterrupt=_isAnimating;if(inputTime<=0){inputTime=Date.now()}if(_instanceOptions.windowScrollingActiveFlag&&window[_instanceOptions.windowScrollingActiveFlag]){return false}if(triggerScrollInterrupt){_interruptScroll()}else{_preventClick=false}_gestureStart.x=inputX;_gestureStart.y=inputY;_gestureStart.t=inputTime;_animationTargetPosition.x=_lastScrollPosition.x;_animationTargetPosition.y=_lastScrollPosition.y;_eventHistory.length=0;_eventHistory.push({x:inputX,y:inputY,t:inputTime});if(triggerScrollInterrupt){_updateScroll(inputX,inputY,inputTime,rawEvent,triggerScrollInterrupt)}return true};_updateScroll=function _updateScroll(inputX,inputY,inputTime,rawEvent,scrollInterrupt){var axis,otherScrollerActive;var initialScroll=false;var gesture={x:inputX-_gestureStart.x,y:inputY-_gestureStart.y};var targetPositions={x:_baseScrollPosition.x+gesture.x,y:_baseScrollPosition.y+gesture.y};var distancesBeyondBounds=_distancesBeyondBounds(targetPositions);if(inputTime<=0){inputTime=Date.now()}if(!_isScrolling){if(_ftscrollerMoving&&_ftscrollerMoving!==_self){otherScrollerActive=true}else{if(_instanceOptions.windowScrollingActiveFlag&&window[_instanceOptions.windowScrollingActiveFlag]){otherScrollerActive=true}}if(otherScrollerActive){_inputIdentifier=false;_releaseInputCapture();if(_scrollbarsVisible){_cancelAnimation();if(!_snapScroll(true)){_finalizeScroll(true)}}return}}if(!_isDisplayingScroll){if(_instanceOptions.bouncing||scrollInterrupt||(_scrollableAxes.x&&gesture.x&&distancesBeyondBounds.x<0)||(_scrollableAxes.y&&gesture.y&&distancesBeyondBounds.y<0)){rawEvent.preventDefault()}if(!(scrollInterrupt&&_instanceOptions.snapping)&&(!_scrollableAxes.x||Math.abs(gesture.x)<_instanceOptions.scrollResponseBoundary)&&(!_scrollableAxes.y||Math.abs(gesture.y)<_instanceOptions.scrollResponseBoundary)){return}if(!_instanceOptions.bouncing&&!scrollInterrupt&&(!_scrollableAxes.x||!gesture.x||distancesBeyondBounds.x>0)&&(!_scrollableAxes.y||!gesture.y||distancesBeyondBounds.y>0)){_preventClick=true;return}_startAnimation();_isDisplayingScroll=true;_hasBeenScrolled=true;_isAnimating=true;initialScroll=true;_scrollbarsVisible=true}else{rawEvent.preventDefault()}if(!_isScrolling){if((scrollInterrupt&&_instanceOptions.snapping)||(_scrollableAxes.x&&Math.abs(gesture.x)>=_instanceOptions.scrollBoundary)||(_scrollableAxes.y&&Math.abs(gesture.y)>=_instanceOptions.scrollBoundary)){_isScrolling=true;_ftscrollerMoving=_self;if(_instanceOptions.windowScrollingActiveFlag){window[_instanceOptions.windowScrollingActiveFlag]=_self}_fireEvent("scrollstart",{scrollLeft:-_baseScrollPosition.x,scrollTop:-_baseScrollPosition.y})}}if(_canClearSelection){window.getSelection().removeAllRanges()}for(axis in _scrollableAxes){if(_scrollableAxes.hasOwnProperty(axis)){if(targetPositions[axis]>0){targetPositions[axis]=_modifyDistanceBeyondBounds(targetPositions[axis],axis)}else{if(targetPositions[axis]<_metrics.scrollEnd[axis]){targetPositions[axis]=_metrics.scrollEnd[axis]+_modifyDistanceBeyondBounds(targetPositions[axis]-_metrics.scrollEnd[axis],axis)}}if(_reqAnimationFrame){_animationTargetPosition[axis]=targetPositions[axis]}else{_setAxisPosition(axis,targetPositions[axis])}}}if(initialScroll){if(_containerNode.className.indexOf("ftscroller_scrolling")===-1){_containerNode.className+=" ftscroller_scrolling"}}if(_isScrolling){_fireEvent("scroll",{scrollLeft:-targetPositions.x,scrollTop:-targetPositions.y});_updateSegments(false)}_eventHistory.push({x:inputX,y:inputY,t:inputTime});if(_eventHistory.length>30){_eventHistory.splice(0,15)}};_endScroll=function _endScroll(inputTime,rawEvent){_inputIdentifier=false;_releaseInputCapture();_cancelAnimation();_fireEvent("scrollinteractionend",{});if(!_isScrolling){if(!_snapScroll(true)&&_scrollbarsVisible){_finalizeScroll(true)}return}_eventHistory[_eventHistory.length-1].t=inputTime;_isScrolling=false;_isDisplayingScroll=false;_ftscrollerMoving=false;if(_instanceOptions.windowScrollingActiveFlag){window[_instanceOptions.windowScrollingActiveFlag]=false}_preventClick=true;if(rawEvent){rawEvent.preventDefault()}if(!_flingScroll()&&!_snapScroll()){_finalizeScroll()}};_finalizeScroll=function _finalizeScroll(scrollCancelled){var i,l,axis;_isAnimating=false;_scrollbarsVisible=false;_isDisplayingScroll=false;_containerNode.className=_containerNode.className.replace(/ ?ftscroller_scrolling/g,"");_baseScrollPosition.x=_lastScrollPosition.x;_baseScrollPosition.y=_lastScrollPosition.y;if(!scrollCancelled){_fireEvent("scroll",{scrollLeft:-_baseScrollPosition.x,scrollTop:-_baseScrollPosition.y});_updateSegments(true);_fireEvent("scrollend",{scrollLeft:-_baseScrollPosition.x,scrollTop:-_baseScrollPosition.y})}for(axis in _scrollableAxes){if(_scrollableAxes.hasOwnProperty(axis)){_scrollNodes[axis].style[_transitionProperty]="";if(_instanceOptions.scrollbars){_scrollbarNodes[axis].style[_transitionProperty]=""}}}for(i=0,l=_timeouts.length;i<l;i=i+1){window.clearTimeout(_timeouts[i])}_timeouts.length=0};_interruptScroll=function _interruptScroll(){var axis,i,l;_isAnimating=false;_updateElementPosition();for(axis in _scrollableAxes){if(_scrollableAxes.hasOwnProperty(axis)){_setAxisPosition(axis,_baseScrollPosition[axis])}}_updateSegments(false);for(i=0,l=_timeouts.length;i<l;i=i+1){window.clearTimeout(_timeouts[i])}_timeouts.length=0};_flingScroll=function _flingScroll(){var i,axis,movementSpeed,lastPosition,comparisonPosition,flingDuration,flingDistance,flingPosition,bounceDelay,bounceDistance,bounceDuration,bounceTarget,boundsBounce,modifiedDistance,flingBezier,timeProportion,boundsCrossDelay,flingStartSegment,beyondBoundsFlingDistance,baseFlingComponent;var maxAnimationTime=0;var moveRequired=false;var scrollPositionsToApply={};if(_eventHistory.length===1||_inputIdentifier==="scrollwheel"){return false}for(axis in _scrollableAxes){if(_scrollableAxes.hasOwnProperty(axis)){bounceDuration=350;bounceDistance=0;boundsBounce=false;bounceTarget=false;boundsCrossDelay=undefined;flingBezier=_kFlingTruncatedBezier;lastPosition=_eventHistory[_eventHistory.length-1];comparisonPosition=_eventHistory[_eventHistory.length-2];for(i=_eventHistory.length-3;i>=0;i=i-1){if(lastPosition.t-_eventHistory[i].t>100){break}comparisonPosition=_eventHistory[i]}movementSpeed=(lastPosition[axis]-comparisonPosition[axis])/(lastPosition.t-comparisonPosition.t);if(Math.abs(movementSpeed)<_kMinimumSpeed){flingDuration=0;flingDistance=0}else{flingDuration=Math.log(_kMinimumSpeed/Math.abs(movementSpeed))/Math.log(_kFriction);flingDistance=movementSpeed*(1-Math.pow(_kFriction,flingDuration+1))/(1-_kFriction)}flingPosition=Math.floor(_lastScrollPosition[axis]+flingDistance);if(!_instanceOptions.bouncing){if(_lastScrollPosition[axis]===0&&flingPosition>0){flingPosition=0}else{if(_lastScrollPosition[axis]===_metrics.scrollEnd[axis]&&flingPosition<_lastScrollPosition[axis]){flingPosition=_lastScrollPosition[axis]}}}if(_instanceOptions.paginatedSnap&&_instanceOptions.snapping){flingStartSegment=-_lastScrollPosition[axis]/_snapGridSize[axis];if(_baseSegment[axis]<flingStartSegment){flingStartSegment=Math.floor(flingStartSegment)}else{flingStartSegment=Math.ceil(flingStartSegment)}if(flingPosition>-(flingStartSegment-1)*_snapGridSize[axis]){bounceDistance=flingPosition+(flingStartSegment-1)*_snapGridSize[axis]}else{if(flingPosition<-(flingStartSegment+1)*_snapGridSize[axis]){bounceDistance=flingPosition+(flingStartSegment+1)*_snapGridSize[axis]}else{if(Math.abs(movementSpeed)>_kMinimumSpeed){if(movementSpeed<0){flingPosition=Math.floor(_lastScrollPosition[axis]/_snapGridSize[axis])*_snapGridSize[axis]}else{flingPosition=Math.ceil(_lastScrollPosition[axis]/_snapGridSize[axis])*_snapGridSize[axis]}flingDuration=Math.min(_instanceOptions.maxFlingDuration,flingDuration*(flingPosition-_lastScrollPosition[axis])/flingDistance)}}}}else{if(_instanceOptions.snapping){bounceDistance=flingPosition-(Math.round(flingPosition/_snapGridSize[axis])*_snapGridSize[axis])}}if(flingPosition-bounceDistance>0){bounceDistance=flingPosition;boundsBounce=true}else{if(flingPosition-bounceDistance<_metrics.scrollEnd[axis]){bounceDistance=flingPosition-_metrics.scrollEnd[axis];boundsBounce=true}}if(bounceDistance){if(boundsBounce&&_instanceOptions.bouncing&&flingDistance){flingDistance=Math.floor(flingDistance);if(flingPosition>0){beyondBoundsFlingDistance=flingPosition-Math.max(0,_lastScrollPosition[axis])}else{beyondBoundsFlingDistance=flingPosition-Math.min(_metrics.scrollEnd[axis],_lastScrollPosition[axis])}baseFlingComponent=flingDistance-beyondBoundsFlingDistance;if(!flingDistance||!flingDuration){timeProportion=0}else{timeProportion=flingBezier._getCoordinateForT(flingBezier.getTForY((flingDistance-beyondBoundsFlingDistance)/flingDistance,1/flingDuration),flingBezier._p1.x,flingBezier._p2.x);boundsCrossDelay=timeProportion*flingDuration}modifiedDistance=Math.ceil(beyondBoundsFlingDistance/8);if(Math.abs(modifiedDistance)>_metrics.container[axis]/2){if(modifiedDistance<0){modifiedDistance=-Math.floor(_metrics.container[axis]/2)}else{modifiedDistance=Math.floor(_metrics.container[axis]/2)}}if(flingPosition>0){bounceTarget=0}else{bounceTarget=_metrics.scrollEnd[axis]}if(timeProportion===0){flingDuration=flingDuration/6;flingPosition=_lastScrollPosition[axis]+baseFlingComponent+modifiedDistance;bounceDelay=flingDuration}else{bounceDelay=(timeProportion+((1-timeProportion)/6))*flingDuration;_scheduleAxisPosition(axis,(_lastScrollPosition[axis]+baseFlingComponent+modifiedDistance),((1-timeProportion)*flingDuration/6),_kDecelerateBezier,boundsCrossDelay);flingBezier=flingBezier.divideAtX(bounceDelay/flingDuration,1/flingDuration)[0];flingDuration=bounceDelay;flingPosition=(_lastScrollPosition[axis]+baseFlingComponent+modifiedDistance)}}else{if((flingDistance<0&&bounceDistance<flingDistance)||(flingDistance>0&&bounceDistance>flingDistance)){flingPosition=flingPosition-Math.floor(flingDistance/2);bounceDistance=bounceDistance-Math.floor(flingDistance/2);bounceDuration=Math.sqrt(Math.abs(bounceDistance))*50;bounceTarget=flingPosition-bounceDistance;flingDuration=350;bounceDelay=flingDuration*0.97}else{flingPosition=flingPosition-bounceDistance;if(!flingDistance){flingDuration=bounceDuration}else{if((flingDistance<0&&bounceDistance<0)||(flingDistance>0&&bounceDistance>0)){timeProportion=flingBezier._getCoordinateForT(flingBezier.getTForY((Math.abs(flingDistance)-Math.abs(bounceDistance))/Math.abs(flingDistance),1/flingDuration),flingBezier._p1.x,flingBezier._p2.x);flingBezier=flingBezier.divideAtX(timeProportion,1/flingDuration)[0];flingDuration=Math.round(flingDuration*timeProportion)}}bounceDistance=0;bounceDuration=0}}}if(flingPosition===_lastScrollPosition[axis]&&!bounceDistance){continue}moveRequired=true;_setAxisPosition(axis,flingPosition,flingDuration,flingBezier,boundsCrossDelay);if(bounceDistance&&bounceDuration){_scheduleAxisPosition(axis,bounceTarget,bounceDuration,_kBounceBezier,bounceDelay)}maxAnimationTime=Math.max(maxAnimationTime,bounceDistance?(bounceDelay+bounceDuration):flingDuration);scrollPositionsToApply[axis]=(bounceTarget===false)?flingPosition:bounceTarget}}if(moveRequired&&maxAnimationTime){_timeouts.push(setTimeout(function(){var axis;for(axis in scrollPositionsToApply){if(scrollPositionsToApply.hasOwnProperty(axis)){_lastScrollPosition[axis]=scrollPositionsToApply[axis]}}_finalizeScroll()},maxAnimationTime))}return moveRequired};_snapScroll=function _snapScroll(scrollCancelled){var axis;var snapDuration=scrollCancelled?100:350;var targetPosition=_getSnapPositionForPosition(_lastScrollPosition);var snapRequired=false;for(axis in _baseScrollableAxes){if(_baseScrollableAxes.hasOwnProperty(axis)){if(targetPosition[axis]!==_lastScrollPosition[axis]){snapRequired=true}}}if(!snapRequired){return false}for(axis in _baseScrollableAxes){if(_baseScrollableAxes.hasOwnProperty(axis)){_setAxisPosition(axis,targetPosition[axis],snapDuration)}}_timeouts.push(setTimeout(function(){_lastScrollPosition=targetPosition;_finalizeScroll(scrollCancelled)},snapDuration));return true};_getSnapPositionForPosition=function _getSnapPositionForPosition(coordinates){var axis;var coordinatesToReturn={x:0,y:0};for(axis in _scrollableAxes){if(_scrollableAxes.hasOwnProperty(axis)){if(coordinates[axis]>0){coordinatesToReturn[axis]=0;continue}if(coordinates[axis]<_metrics.scrollEnd[axis]){coordinatesToReturn[axis]=_metrics.scrollEnd[axis];continue}if(_instanceOptions.snapping&&_snapGridSize[axis]){coordinatesToReturn[axis]=Math.round(coordinates[axis]/_snapGridSize[axis])*_snapGridSize[axis];continue}coordinatesToReturn[axis]=coordinates[axis]}}return coordinatesToReturn};_initializeDOM=function _initializeDOM(){var offscreenFragment,offscreenNode,scrollYParent;if(_existingDOMValid()){return}offscreenFragment=_scrollableMasterNode.ownerDocument.createDocumentFragment();offscreenNode=document.createElement("DIV");offscreenFragment.appendChild(offscreenNode);offscreenNode.innerHTML=FTScroller.prototype.getPrependedHTML(!_instanceOptions.scrollingX,!_instanceOptions.scrollingY,_instanceOptions.hwAccelerationClass)+FTScroller.prototype.getAppendedHTML(!_instanceOptions.scrollingX,!_instanceOptions.scrollingY,_instanceOptions.hwAccelerationClass,_instanceOptions.scrollbars);_containerNode=offscreenNode.firstElementChild;scrollYParent=_containerNode;if(_instanceOptions.scrollingX){_scrollNodes.x=_containerNode.firstElementChild;scrollYParent=_scrollNodes.x;if(_instanceOptions.scrollbars){_scrollbarNodes.x=_containerNode.getElementsByClassName("ftscroller_scrollbarx")[0]}}if(_instanceOptions.scrollingY){_scrollNodes.y=scrollYParent.firstElementChild;if(_instanceOptions.scrollbars){_scrollbarNodes.y=_containerNode.getElementsByClassName("ftscroller_scrollbary")[0]}_contentParentNode=_scrollNodes.y}else{_contentParentNode=_scrollNodes.x}while(_scrollableMasterNode.firstChild){_contentParentNode.appendChild(_scrollableMasterNode.firstChild)}_scrollableMasterNode.appendChild(_containerNode)};_existingDOMValid=function _existingDOMValid(){var scrollerContainer,layerX,layerY,yParent,scrollerX,scrollerY,candidates,i,l;scrollerContainer=_scrollableMasterNode.firstElementChild;if(!scrollerContainer||scrollerContainer.className.indexOf("ftscroller_container")===-1){return}if(_instanceOptions.scrollingX){layerX=scrollerContainer.firstElementChild;if(!layerX||layerX.className.indexOf("ftscroller_x")===-1){return}yParent=layerX;if(_instanceOptions.scrollbars){candidates=scrollerContainer.getElementsByClassName("ftscroller_scrollbarx");if(candidates){for(i=0,l=candidates.length;i<l;i=i+1){if(candidates[i].parentNode===scrollerContainer){scrollerX=candidates[i];break}}}if(!scrollerX){return}}}else{yParent=scrollerContainer}if(_instanceOptions.scrollingY){layerY=yParent.firstElementChild;if(!layerY||layerY.className.indexOf("ftscroller_y")===-1){return}if(_instanceOptions.scrollbars){candidates=scrollerContainer.getElementsByClassName("ftscroller_scrollbary");if(candidates){for(i=0,l=candidates.length;i<l;i=i+1){if(candidates[i].parentNode===scrollerContainer){scrollerY=candidates[i];break}}}if(!scrollerY){return}}}_containerNode=scrollerContainer;if(layerX){_scrollNodes.x=layerX}if(layerY){_scrollNodes.y=layerY}if(scrollerX){_scrollbarNodes.x=scrollerX}if(scrollerY){_scrollbarNodes.y=scrollerY}if(_instanceOptions.scrollingY){_contentParentNode=layerY}else{_contentParentNode=layerX}return true};_domChanged=function _domChanged(){if(_domChangeDebouncer){window.clearTimeout(_domChangeDebouncer)}_domChangeDebouncer=setTimeout(function(){_updateDimensions()},100)};_updateDimensions=function _updateDimensions(ignoreSnapScroll){var axis;if(!_containerNode||!_contentParentNode){return false}if(_domChangeDebouncer){window.clearTimeout(_domChangeDebouncer);_domChangeDebouncer=false}var containerWidth,containerHeight,startAlignments;_endScroll(Date.now());startAlignments={x:false,y:false};for(axis in startAlignments){if(startAlignments.hasOwnProperty(axis)){if(_lastScrollPosition[axis]===0){startAlignments[axis]=-1}else{if(_lastScrollPosition[axis]<=_metrics.scrollEnd[axis]){startAlignments[axis]=1}else{if(_lastScrollPosition[axis]*2<=_metrics.scrollEnd[axis]+5&&_lastScrollPosition[axis]*2>=_metrics.scrollEnd[axis]-5){startAlignments[axis]=0}}}}}containerWidth=_containerNode.offsetWidth;containerHeight=_containerNode.offsetHeight;var rawScrollWidth=options.contentWidth||_contentParentNode.offsetWidth;var rawScrollHeight=options.contentHeight||_contentParentNode.offsetHeight;var scrollWidth=rawScrollWidth;var scrollHeight=rawScrollHeight;var targetPosition={x:false,y:false};if(!_snapGridSize.userX){_snapGridSize.x=containerWidth}if(!_snapGridSize.userY){_snapGridSize.y=containerHeight}if(_instanceOptions.snapping){if(_snapGridSize.userX){scrollWidth=Math.ceil(scrollWidth/_snapGridSize.userX)*_snapGridSize.userX}else{scrollWidth=Math.ceil(scrollWidth/_snapGridSize.x)*_snapGridSize.x}if(_snapGridSize.userY){scrollHeight=Math.ceil(scrollHeight/_snapGridSize.userY)*_snapGridSize.userY}else{scrollHeight=Math.ceil(scrollHeight/_snapGridSize.y)*_snapGridSize.y}}if(_metrics.container.x===containerWidth&&_metrics.container.y===containerHeight&&_metrics.content.x===scrollWidth&&_metrics.content.y===scrollHeight){return}_metrics.container.x=containerWidth;_metrics.container.y=containerHeight;_metrics.content.x=scrollWidth;_metrics.content.rawX=rawScrollWidth;_metrics.content.y=scrollHeight;_metrics.content.rawY=rawScrollHeight;_metrics.scrollEnd.x=containerWidth-scrollWidth;_metrics.scrollEnd.y=containerHeight-scrollHeight;_updateScrollbarDimensions();for(axis in targetPosition){if(targetPosition.hasOwnProperty(axis)){if(_metrics.container[axis]<_metrics.content[axis]){if(_hasBeenScrolled&&_instanceOptions.baseAlignments[axis]!==startAlignments[axis]){continue}}if(_instanceOptions.baseAlignments[axis]===1){targetPosition[axis]=_metrics.scrollEnd[axis]}else{if(_instanceOptions.baseAlignments[axis]===0){targetPosition[axis]=Math.floor(_metrics.scrollEnd[axis]/2)}else{if(_instanceOptions.baseAlignments[axis]===-1){targetPosition[axis]=0}}}}}if(_instanceOptions.scrollingX&&targetPosition.x!==false){_setAxisPosition("x",targetPosition.x,0);_baseScrollPosition.x=targetPosition.x}if(_instanceOptions.scrollingY&&targetPosition.y!==false){_setAxisPosition("y",targetPosition.y,0);_baseScrollPosition.y=targetPosition.y}if(!ignoreSnapScroll&&_snapScroll()){_updateSegments(true)}};_updateScrollbarDimensions=function _updateScrollbarDimensions(){if(_instanceOptions.scrollbars){if(_instanceOptions.scrollingX){_scrollbarNodes.x.style.width=Math.max(6,Math.round(_metrics.container.x*(_metrics.container.x/_metrics.content.x)-4))+"px"}if(_instanceOptions.scrollingY){_scrollbarNodes.y.style.height=Math.max(6,Math.round(_metrics.container.y*(_metrics.container.y/_metrics.content.y)-4))+"px"}}_scrollableAxes={};if(_instanceOptions.scrollingX&&(_metrics.content.x>_metrics.container.x||_instanceOptions.alwaysScroll)){_scrollableAxes.x=true}if(_instanceOptions.scrollingY&&(_metrics.content.y>_metrics.container.y||_instanceOptions.alwaysScroll)){_scrollableAxes.y=true}};_updateElementPosition=function _updateElementPosition(){var axis,computedStyle,splitStyle;for(axis in _scrollableAxes){if(_scrollableAxes.hasOwnProperty(axis)){computedStyle=window.getComputedStyle(_scrollNodes[axis],null)[_vendorTransformLookup];splitStyle=computedStyle.split(", ");if(splitStyle.length===6){_baseScrollPosition[axis]=parseInt(splitStyle[(axis==="y")?5:4],10)}else{_baseScrollPosition[axis]=parseInt(splitStyle[(axis==="y")?13:12],10)}_lastScrollPosition[axis]=_baseScrollPosition[axis]}}};_updateSegments=function _updateSegments(scrollFinalised){var axis;var newSegment={x:0,y:0};if(!_instanceOptions.snapping){return}for(axis in _scrollableAxes){if(_scrollableAxes.hasOwnProperty(axis)){newSegment[axis]=Math.max(0,Math.min(Math.ceil(_metrics.content[axis]/_snapGridSize[axis])-1,Math.round(-_lastScrollPosition[axis]/_snapGridSize[axis])))}}if(newSegment.x!==_activeSegment.x||newSegment.y!==_activeSegment.y){_activeSegment.x=newSegment.x;_activeSegment.y=newSegment.y;_fireEvent("segmentwillchange",{segmentX:newSegment.x,segmentY:newSegment.y})}if(scrollFinalised){if(newSegment.x!==_baseSegment.x||newSegment.y!==_baseSegment.y){_baseSegment.x=newSegment.x;_baseSegment.y=newSegment.y;_fireEvent("segmentdidchange",{segmentX:newSegment.x,segmentY:newSegment.y})}}};_setAxisPosition=function _setAxisPosition(axis,position,animationDuration,animationBezier,boundsCrossDelay){var transitionCSSString,newPositionAtExtremity=null;if(!_scrollNodes[axis]){return false}if(animationDuration){if(!animationBezier){animationBezier=_kFlingTruncatedBezier}transitionCSSString=_vendorCSSPrefix+"transform "+animationDuration+"ms "+animationBezier.toString()}else{transitionCSSString=""}_scrollNodes[axis].style[_transitionProperty]=transitionCSSString;if(_instanceOptions.scrollbars){_scrollbarNodes[axis].style[_transitionProperty]=transitionCSSString}_scrollNodes[axis].style[_transformProperty]=_translateRulePrefix+_transformPrefixes[axis]+position+"px"+_transformSuffixes[axis];if(_instanceOptions.scrollbars){_scrollbarNodes[axis].style[_transformProperty]=_translateRulePrefix+_transformPrefixes[axis]+(-position*_metrics.container[axis]/_metrics.content[axis])+"px"+_transformSuffixes[axis]}if(position>=0){newPositionAtExtremity="start"}else{if(position<=_metrics.scrollEnd[axis]){newPositionAtExtremity="end"}}if(newPositionAtExtremity!==_scrollAtExtremity[axis]){if(newPositionAtExtremity!==null){if(animationDuration){_timeouts.push(setTimeout(function(){_fireEvent("reached"+newPositionAtExtremity,{axis:axis})},boundsCrossDelay||animationDuration))}else{_fireEvent("reached"+newPositionAtExtremity,{axis:axis})}}_scrollAtExtremity[axis]=newPositionAtExtremity}if(!animationDuration){_lastScrollPosition[axis]=position}};_scheduleAxisPosition=function _scheduleAxisPosition(axis,position,animationDuration,animationBezier,afterDelay){_timeouts.push(setTimeout(function(){_setAxisPosition(axis,position,animationDuration,animationBezier)},afterDelay))};_fireEvent=function _fireEvent(eventName,eventObject){var i,l;eventObject.srcObject=_publicSelf;for(i=0,l=_eventListeners[eventName].length;i<l;i=i+1){try{_eventListeners[eventName][i](eventObject)}catch(error){if(window.console&&window.console.error){window.console.error(error.message+" ("+error.sourceURL+", line "+error.line+")")}}}};_childFocused=function _childFocused(event){var offset,axis;var focusedNodeRect=_getBoundingRect(event.target);var containerRect=_getBoundingRect(_containerNode);var edgeMap={x:"left",y:"top"};var dimensionMap={x:"width",y:"height"};if(_inputIdentifier!==false){return}for(axis in _scrollableAxes){if(_scrollableAxes.hasOwnProperty(axis)){offset=-Math.round((focusedNodeRect[dimensionMap[axis]]/2)-_lastScrollPosition[axis]+focusedNodeRect[edgeMap[axis]]-containerRect[edgeMap[axis]]-(containerRect[dimensionMap[axis]]/2));offset=Math.min(0,Math.max(_metrics.scrollEnd[axis],offset));_setAxisPosition(axis,offset,0);_baseScrollPosition[axis]=offset}}_fireEvent("scroll",{scrollLeft:-_baseScrollPosition.x,scrollTop:-_baseScrollPosition.y})};_modifyDistanceBeyondBounds=function _modifyDistanceBeyondBounds(distance,axis){if(!_instanceOptions.bouncing){return 0}var e=Math.exp(distance/_metrics.container[axis]);return Math.round(_metrics.container[axis]*0.6*(e-1)/(e+1))};_distancesBeyondBounds=function _distancesBeyondBounds(positions){var axis,position;var distances={};for(axis in positions){if(positions.hasOwnProperty(axis)){position=positions[axis];if(position>=0){distances[axis]=position}else{if(position>_metrics.scrollEnd[axis]){distances[axis]=-1}else{distances[axis]=_metrics.scrollEnd[axis]-position}}}}return distances};_startAnimation=function _startAnimation(){if(_reqAnimationFrame){_cancelAnimation();_animationFrameRequest=_reqAnimationFrame(_scheduleRender)}};_scheduleRender=function _scheduleRender(){var axis;_animationFrameRequest=_reqAnimationFrame(_scheduleRender);for(axis in _scrollableAxes){if(_scrollableAxes.hasOwnProperty(axis)&&_animationTargetPosition[axis]!==_lastScrollPosition[axis]){_setAxisPosition(axis,_animationTargetPosition[axis])}}};_cancelAnimation=function _cancelAnimation(){if(_animationFrameRequest===false||!_cancelAnimationFrame){return}_cancelAnimationFrame(_animationFrameRequest);_animationFrameRequest=false};_toggleEventHandlers=function _toggleEventHandlers(enable){var MutationObserver;if(!_containerNode){return}if(enable){_containerNode._ftscrollerToggle=_containerNode.addEventListener}else{_containerNode._ftscrollerToggle=_containerNode.removeEventListener}if(_trackPointerEvents){_containerNode._ftscrollerToggle("MSPointerDown",_onPointerDown,true);_containerNode._ftscrollerToggle("MSPointerMove",_onPointerMove,true);_containerNode._ftscrollerToggle("MSPointerUp",_onPointerUp,true);_containerNode._ftscrollerToggle("MSPointerCancel",_onPointerCancel,true)}else{if(_trackTouchEvents){_containerNode._ftscrollerToggle("touchstart",_onTouchStart,true);_containerNode._ftscrollerToggle("touchmove",_onTouchMove,true);_containerNode._ftscrollerToggle("touchend",_onTouchEnd,true);_containerNode._ftscrollerToggle("touchcancel",_onTouchEnd,true)}_containerNode._ftscrollerToggle("mousedown",_onMouseDown,true);if(!enable){document.removeEventListener("mousemove",_onMouseMove,true);document.removeEventListener("mouseup",_onMouseUp,true)}}_containerNode._ftscrollerToggle("DOMMouseScroll",_onMouseScroll,false);_containerNode._ftscrollerToggle("mousewheel",_onMouseScroll,false);if(_trackPointerEvents){if(enable){document.addEventListener("click",_onClick,true)}else{document.removeEventListener("click",_onClick,true)}}else{_containerNode._ftscrollerToggle("click",_onClick,true)}if(enable){_contentParentNode.addEventListener("focus",_childFocused,true);if(_instanceOptions.updateOnChanges){if(!_mutationObserver){MutationObserver=window.MutationObserver||window.WebKitMutationObserver||window[_vendorStylePropertyPrefix+"MutationObserver"];if(MutationObserver){_mutationObserver=new MutationObserver(_domChanged)}}if(_mutationObserver){_mutationObserver.observe(_contentParentNode,{childList:true,characterData:true,subtree:true})}else{_contentParentNode.addEventListener("DOMSubtreeModified",function(e){if(e&&(e.srcElement===_contentParentNode||e.srcElement.className.indexOf("ftscroller_")!==-1)){return}_domChanged()},true)}_contentParentNode.addEventListener("load",_domChanged,true)}if(_instanceOptions.updateOnWindowResize){window.addEventListener("resize",_domChanged,true)}}else{_contentParentNode.removeEventListener("focus",_childFocused,true);if(_mutationObserver){_mutationObserver.disconnect()}else{_contentParentNode.removeEventListener("DOMSubtreeModified",_domChanged,true)}_contentParentNode.removeEventListener("load",_domChanged,true);window.removeEventListener("resize",_domChanged,true)}delete _containerNode._ftscrollerToggle};_onTouchStart=function _onTouchStart(startEvent){var i,l,touchEvent;if(_inputIdentifier){for(i=0,l=startEvent.touches.length;i<l;i=i+1){if(startEvent.touches[i].identifier===_inputIdentifier){_inputIndex=i}}return}touchEvent=startEvent.touches[0];_inputIdentifier=touchEvent.identifier;_inputIndex=0;_startScroll(touchEvent.clientX,touchEvent.clientY,startEvent.timeStamp,startEvent)};_onTouchMove=function _onTouchMove(moveEvent){if(_inputIdentifier===false){return}var touchEvent=moveEvent.touches[_inputIndex];_updateScroll(touchEvent.clientX,touchEvent.clientY,moveEvent.timeStamp,moveEvent)};_onTouchEnd=function _onTouchEnd(endEvent){var i,l;if(endEvent.touches){for(i=0,l=endEvent.touches.length;i<l;i=i+1){if(endEvent.touches[i].identifier===_inputIdentifier){_inputIndex=i;return}}}_endScroll(endEvent.timeStamp,endEvent)};_onMouseDown=function _onMouseDown(startEvent){if((startEvent.button&&startEvent.button===2)||startEvent.ctrlKey){return}if(_containerNode.setCapture){_containerNode.setCapture()}document.addEventListener("mousemove",_onMouseMove,true);document.addEventListener("mouseup",_onMouseUp,true);_inputIdentifier=startEvent.button||1;_inputIndex=0;_startScroll(startEvent.clientX,startEvent.clientY,startEvent.timeStamp,startEvent)};_onMouseMove=function _onMouseMove(moveEvent){if(!_inputIdentifier){return}_updateScroll(moveEvent.clientX,moveEvent.clientY,moveEvent.timeStamp,moveEvent)};_onMouseUp=function _onMouseUp(endEvent){if(endEvent.button&&endEvent.button!==_inputIdentifier){return}document.removeEventListener("mousemove",_onMouseMove,true);document.removeEventListener("mouseup",_onMouseUp,true);if(_containerNode.releaseCapture){_containerNode.releaseCapture()}_endScroll(endEvent.timeStamp,endEvent)};_onPointerDown=function _onPointerDown(startEvent){if(_inputIdentifier){return}_inputIdentifier=startEvent.pointerId;_captureInput();_startScroll(startEvent.clientX,startEvent.clientY,startEvent.timeStamp,startEvent)};_onPointerMove=function _onPointerMove(moveEvent){if(_inputIdentifier!==moveEvent.pointerId){return}_updateScroll(moveEvent.clientX,moveEvent.clientY,moveEvent.timeStamp,moveEvent)};_onPointerUp=function _onPointerUp(endEvent){if(_inputIdentifier!==endEvent.pointerId){return}_endScroll(endEvent.timeStamp,endEvent)};_onPointerCancel=function _onPointerCancel(endEvent){_endScroll(endEvent.timeStamp,endEvent)};_onPointerCaptureEnd=function _onPointerCaptureEnd(event){_endScroll(event.timeStamp,event)};_onClick=function _onClick(clickEvent){if(!_preventClick&&!_inputIdentifier){return true}clickEvent.preventDefault();clickEvent.stopPropagation();if(!_inputIdentifier){_preventClick=false}return false};_onMouseScroll=function _onMouseScroll(event){var scrollDeltaX,scrollDeltaY;if(_inputIdentifier!=="scrollwheel"){if(_inputIdentifier!==false){return true}_inputIdentifier="scrollwheel";_cumulativeScroll.x=0;_cumulativeScroll.y=0;if(!_startScroll(event.clientX,event.clientY,Date.now(),event)){return}}if(event.wheelDelta){if(event.wheelDeltaX){scrollDeltaX=event.wheelDeltaX/2;scrollDeltaY=event.wheelDeltaY/2}else{scrollDeltaX=0;scrollDeltaY=event.wheelDelta/2}}else{if(event.axis&&event.axis===event.HORIZONTAL_AXIS){scrollDeltaX=event.detail*-10;scrollDeltaY=0}else{scrollDeltaX=0;scrollDeltaY=event.detail*-10}}if(!_instanceOptions.scrollingY&&!scrollDeltaX){scrollDeltaX=scrollDeltaY;scrollDeltaY=0}_cumulativeScroll.x=Math.round(_cumulativeScroll.x+scrollDeltaX);_cumulativeScroll.y=Math.round(_cumulativeScroll.y+scrollDeltaY);_updateScroll(_gestureStart.x+_cumulativeScroll.x,_gestureStart.y+_cumulativeScroll.y,event.timeStamp,event);if(_scrollWheelEndDebouncer){clearTimeout(_scrollWheelEndDebouncer)}_scrollWheelEndDebouncer=setTimeout(function(){_inputIdentifier=false;_releaseInputCapture();_isScrolling=false;_isDisplayingScroll=false;_ftscrollerMoving=false;if(_instanceOptions.windowScrollingActiveFlag){window[_instanceOptions.windowScrollingActiveFlag]=false}_cancelAnimation();if(!_snapScroll()){_finalizeScroll()}},300)};_captureInput=function _captureInput(){if(_inputCaptured||_inputIdentifier===false||_inputIdentifier==="scrollwheel"){return}if(_trackPointerEvents){_containerNode.msSetPointerCapture(_inputIdentifier);_containerNode.addEventListener("MSLostPointerCapture",_onPointerCaptureEnd,false)}_inputCaptured=true};_releaseInputCapture=function _releaseInputCapture(){if(!_inputCaptured){return}if(_trackPointerEvents){_containerNode.removeEventListener("MSLostPointerCapture",_onPointerCaptureEnd,false);_containerNode.msReleasePointerCapture(_inputIdentifier)}_inputCaptured=false};_getBoundingRect=function _getBoundingRect(anElement){if(anElement.getBoundingClientRect){return anElement.getBoundingClientRect()}var x=0,y=0,eachElement=anElement;while(eachElement){x=x+eachElement.offsetLeft-eachElement.scrollLeft;y=y+eachElement.offsetTop-eachElement.scrollTop;eachElement=eachElement.offsetParent}return{left:x,top:y,width:anElement.offsetWidth,height:anElement.offsetHeight}};_initializeDOM();_updateDimensions();_toggleEventHandlers(true);_publicSelf={destroy:destroy,setSnapSize:setSnapSize,scrollTo:scrollTo,scrollBy:scrollBy,updateDimensions:updateDimensions,addEventListener:addEventListener,removeEventListener:removeEventListener,get scrollHeightfunction(){return _metrics.content.y},set scrollHeightfunction(value){throw new SyntaxError("scrollHeight is currently read-only - ignoring "+value)},get scrollLeftfunction(){return -_lastScrollPosition.x},set scrollLeftfunction(value){scrollTo(value,false,false);return -_lastScrollPosition.x},get scrollTopfunction(){return -_lastScrollPosition.y},set scrollTopfunction(value){scrollTo(false,value,false);return -_lastScrollPosition.y},get scrollWidthfunction(){return _metrics.content.x},set scrollWidthfunction(value){throw new SyntaxError("scrollWidth is currently read-only - ignoring "+value)},get segmentCountfunction(){if(!_instanceOptions.snapping){return{x:NaN,y:NaN}}return{x:Math.ceil(_metrics.content.x/_snapGridSize.x),y:Math.ceil(_metrics.content.y/_snapGridSize.y)}},set segmentCountfunction(value){throw new SyntaxError("segmentCount is currently read-only - ignoring "+value)},get currentSegmentfunction(){return{x:_activeSegment.x,y:_activeSegment.y}},set currentSegmentfunction(value){throw new SyntaxError("currentSegment is currently read-only - ignoring "+value)},get contentContainerNodefunction(){return _contentParentNode},set contentContainerNodefunction(value){throw new SyntaxError("contentContainerNode is currently read-only - ignoring "+value)}};return _publicSelf};FTScroller.prototype.getPrependedHTML=function(excludeXAxis,excludeYAxis,hwAccelerationClass){if(!hwAccelerationClass){if(typeof FTScrollerOptions==="object"&&FTScrollerOptions.hwAccelerationClass){hwAccelerationClass=FTScrollerOptions.hwAccelerationClass}else{hwAccelerationClass="ftscroller_hwaccelerated"}}var output='<div class="ftscroller_container">';if(!excludeXAxis){output+='<div class="ftscroller_x '+hwAccelerationClass+'">'}if(!excludeYAxis){output+='<div class="ftscroller_y '+hwAccelerationClass+'">'}return output};FTScroller.prototype.getAppendedHTML=function(excludeXAxis,excludeYAxis,hwAccelerationClass,scrollbars){if(!hwAccelerationClass){if(typeof FTScrollerOptions==="object"&&FTScrollerOptions.hwAccelerationClass){hwAccelerationClass=FTScrollerOptions.hwAccelerationClass}else{hwAccelerationClass="ftscroller_hwaccelerated"}}var output="";if(!excludeXAxis){output+="</div>"}if(!excludeYAxis){output+="</div>"}if(scrollbars){if(!excludeXAxis){output+='<div class="ftscroller_scrollbar ftscroller_scrollbarx '+hwAccelerationClass+'"><div class="ftscroller_scrollbarinner"></div></div>'}if(!excludeYAxis){output+='<div class="ftscroller_scrollbar ftscroller_scrollbary '+hwAccelerationClass+'"><div class="ftscroller_scrollbarinner"></div></div>'}}output+="</div>";return output}}());(function(){CubicBezier=function(p1x,p1y,p2x,p2y){if(!(p1x>=0&&p1x<=1)){throw new RangeError('"p1x" must be a number between 0 and 1. Got '+p1x+"instead.")}if(!(p1y>=0&&p1y<=1)){throw new RangeError('"p1y" must be a number between 0 and 1. Got '+p1y+"instead.")}if(!(p2x>=0&&p2x<=1)){throw new RangeError('"p2x" must be a number between 0 and 1. Got '+p2x+"instead.")}if(!(p2y>=0&&p2y<=1)){throw new RangeError('"p2y" must be a number between 0 and 1. Got '+p2y+"instead.")}this._p1={x:p1x,y:p1y};this._p2={x:p2x,y:p2y}};CubicBezier.prototype._getCoordinateForT=function(t,p1,p2){var c=3*p1,b=3*(p2-p1)-c,a=1-c-b;return((a*t+b)*t+c)*t};CubicBezier.prototype._getCoordinateDerivateForT=function(t,p1,p2){var c=3*p1,b=3*(p2-p1)-c,a=1-c-b;return(3*a*t+2*b)*t+c};CubicBezier.prototype._getTForCoordinate=function(c,p1,p2,epsilon){if(!isFinite(epsilon)||epsilon<=0){throw new RangeError('"epsilon" must be a number greater than 0.')}var t2,i,c2,d2;for(t2=c,i=0;i<8;i=i+1){c2=this._getCoordinateForT(t2,p1,p2)-c;if(Math.abs(c2)<epsilon){return t2}d2=this._getCoordinateDerivateForT(t2,p1,p2);if(Math.abs(d2)<0.000001){break}t2=t2-c2/d2}t2=c;var t0=0,t1=1;if(t2<t0){return t0}if(t2>t1){return t1}while(t0<t1){c2=this._getCoordinateForT(t2,p1,p2);if(Math.abs(c2-c)<epsilon){return t2}if(c>c2){t0=t2}else{t1=t2}t2=(t1-t0)*0.5+t0}return t2};CubicBezier.prototype.getPointForT=function(t){if(t===0||t===1){return{x:t,y:t}}if(t<0||t>1){throw new RangeError('"t" must be a number between 0 and 1Got '+t+" instead.")}return{x:this._getCoordinateForT(t,this._p1.x,this._p2.x),y:this._getCoordinateForT(t,this._p1.y,this._p2.y)}};CubicBezier.prototype.getTForX=function(x,epsilon){return this._getTForCoordinate(x,this._p1.x,this._p2.x,epsilon)};CubicBezier.prototype.getTForY=function(y,epsilon){return this._getTForCoordinate(y,this._p1.y,this._p2.y,epsilon)};CubicBezier.prototype._getAuxPoints=function(t){if(t<=0||t>=1){throw new RangeError('"t" must be greater than 0 and lower than 1')}var i0={x:t*this._p1.x,y:t*this._p1.y},i1={x:this._p1.x+t*(this._p2.x-this._p1.x),y:this._p1.y+t*(this._p2.y-this._p1.y)},i2={x:this._p2.x+t*(1-this._p2.x),y:this._p2.y+t*(1-this._p2.y)};var j0={x:i0.x+t*(i1.x-i0.x),y:i0.y+t*(i1.y-i0.y)},j1={x:i1.x+t*(i2.x-i1.x),y:i1.y+t*(i2.y-i1.y)};var k={x:j0.x+t*(j1.x-j0.x),y:j0.y+t*(j1.y-j0.y)};return{i0:i0,i1:i1,i2:i2,j0:j0,j1:j1,k:k}};CubicBezier.prototype.divideAtT=function(t){if(t<0||t>1){throw new RangeError('"t" must be a number between 0 and 1. Got '+t+" instead.")}if(t===0||t===1){var curves=[];curves[t]=CubicBezier.linear();curves[1-t]=this.clone();return curves}var left={},right={},points=this._getAuxPoints(t);var i0=points.i0,i2=points.i2,j0=points.j0,j1=points.j1,k=points.k;var factorX=k.x,factorY=k.y;left.p1={x:i0.x/factorX,y:i0.y/factorY};left.p2={x:j0.x/factorX,y:j0.y/factorY};right.p1={x:(j1.x-factorX)/(1-factorX),y:(j1.y-factorY)/(1-factorY)};right.p2={x:(i2.x-factorX)/(1-factorX),y:(i2.y-factorY)/(1-factorY)};return[new CubicBezier(left.p1.x,left.p1.y,left.p2.x,left.p2.y),new CubicBezier(right.p1.x,right.p1.y,right.p2.x,right.p2.y)]};CubicBezier.prototype.divideAtX=function(x,epsilon){if(x<0||x>1){throw new RangeError('"x" must be a number between 0 and 1. Got '+x+" instead.")}var t=this.getTForX(x,epsilon);return this.divideAtT(t)};CubicBezier.prototype.divideAtY=function(y,epsilon){if(y<0||y>1){throw new RangeError('"y" must be a number between 0 and 1. Got '+y+" instead.")}var t=this.getTForY(y,epsilon);return this.divideAtT(t)};CubicBezier.prototype.clone=function(){return new CubicBezier(this._p1.x,this._p1.y,this._p2.x,this._p2.y)};CubicBezier.prototype.toString=function(){return"cubic-bezier("+[this._p1.x,this._p1.y,this._p2.x,this._p2.y].join(", ")+")"};CubicBezier.linear=function(){return new CubicBezier()};CubicBezier.ease=function(){return new CubicBezier(0.25,0.1,0.25,1)};CubicBezier.linear=function(){return new CubicBezier(0,0,1,1)};CubicBezier.easeIn=function(){return new CubicBezier(0.42,0,1,1)};CubicBezier.easeOut=function(){return new CubicBezier(0,0,0.58,1)};CubicBezier.easeInOut=function(){return new CubicBezier(0.42,0,0.58,1)}}());if(typeof module==="object"&&module.exports){module.exports=function(domNode,options){return new FTScroller(domNode,options)};module.exports.FTScroller=FTScroller;module.exports.CubicBezier=CubicBezier};